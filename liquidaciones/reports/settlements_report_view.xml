<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <!-- <template id="report_settlements">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="doc">
             
            </t>
        </t>
    </template> -->

    <template id="report_settlements">
        <t t-foreach="docs" t-as="property">
            <t t-call="web.html_container">
                <t t-call="web.external_layout">
                    <div class="page">
                        <h2>
                            Settlements
                            <!-- <span t-field="property.name"/> -->
                        </h2>
                        <table class="table">
                            <thead>
                                <tr>
                                    <th> <strong>Note: </strong><span t-field="property.note"/></th>
                                    <th> <strong>Journey: </strong><span t-field="property.journey"/></th>
                                    <th> <strong>Company: </strong><span t-field="property.company"/></th>
                                </tr>
                            </thead>
                        </table>
                         
                        <table class="table">
                            <thead>
                                <tr>
                            <th>Date:</th>
                            <th>Product:</th>
                            <th>Uom:</th>
                            <th>Emb:</th>
                            <th>Rec:</th>
                            <th>Price unit:</th>
                            <th>Amount:</th>
                            <t t-if="property.price_type=='close'">
                             <th>Commission:</th>
                             <th>Total:</th>
                            </t> 
                                </tr>
                            </thead>
                            <tbody>
                                <t t-set="offers" t-value="property.mapped('settlements_line_ids')"/>
                                <tr t-foreach="offers" t-as="offer">
                                    <td>
                                        <span t-field="offer.date"/>
                                    </td>
                                    <td>
                                        <span t-field="offer.product_id"/>
                                    </td>
                                    <td>
                                        <span t-field="offer.product_uom"/>
                                    </td>
                                    <td>
                                        <span t-field="offer.box_emb"/>
                                    </td>
                                    <td>
                                        <span t-field="offer.box_rec"/>
                                    </td>
                                    <td>
                                        <span t-field="offer.price_unit"/>
                                    </td>
                                    <td>
                                        <span t-field="offer.amount"/>
                                    </td>
                                    <t t-if="property.price_type=='close'">
                            <td>
                                        <span t-field="offer.commission"/>
                                    </td>
                                    <td>
                                        <span t-field="offer.total"/>
                                    </td>
                            </t>     
                                </tr> 
                            </tbody>
                        </table>
                        <br></br>
                        <table class="table">
                            <thead>
                                <tr>
                                    <th> <strong>Sales: </strong></th>
                                    <td> <span t-field="property.total"/></td>
                                    <th> <strong>Calculated Sales: </strong></th>
                                    <td> <span t-field="property.calculated_sales"/></td>
                                </tr>
                                <tr>
                                    <th> <strong>Storage: </strong></th>
                                    <td> <span t-field="property.storage"/></td>
                                    <th> <strong>Commission: %</strong></th>
                                    <td> <span t-field="property.commission_percentage"/></td>
                                </tr>
                                <tr>
                                    <th> <strong>Adjustment: </strong></th>
                                    <td> <span t-field="property.adjustment"/></td>
                                    <th> <strong>Commission: </strong></th>
                                    <td> <span t-field="property.commission"/></td>
                                </tr>
                                <tr>
                                    <th> <strong>Maneuvers: </strong></th>
                                    <td> <span t-field="property.maneuvers"/></td>
                                    <th> <strong>Freight Out: </strong></th>
                                    <td> <span t-field="property.freight_out"/></td>
                                </tr>
                                <tr>
                                    <th></th>
                                    <td></td>
                                    <th> <strong>Freight In: </strong></th>
                                    <td> <span t-field="property.freight_in"/></td>
                                </tr>
                                <tr>
                                    <th></th>
                                    <td></td>
                                    <th> <strong>Aduana: </strong></th>
                                    <td> <span t-field="property.aduana"/></td>
                                </tr>
                                <tr>
                                   <th></th>
                                   <td></td>
                                   <th></th>
                                   <td></td>
                                </tr>
                                <tr>
                                    <th> <strong>Utility: </strong></th>
                                    <td> <span t-field="property.utility"/></td>
                                    <th> <strong>Utility: %</strong></th>
                                    <td> <span t-field="property.utility_percentage"/></td>
                                </tr>
                            </thead>
                        </table>
                    </div>
                </t>
            </t>
        </t>
    </template>

    <!-- <record id="paperformat_report_settlements" model="report.paperformat">
        <field name="name">Report Settlements</field>
        <field name="orientation">Landscape</field>
 </record> -->
</odoo>